## 作用域链
### 定义
通常我们在查找变量时，首先会从当前执行上下文的变量对象中去找，没有找到时，则会去父级执行上下文中的变量对象中去查找，以此内推，一直找到全局执行上下文的变量对象（全局对象），该过程中所有的执行上下文的变量所构成的链表就是所谓的作用域链。

### 函数创建
首先，函数的作用域在函数定义的时候就决定了。
原因是，函数的内部存在一个[[scope]]属性。当函数创建时，会将所有的父变量对象保存至内部，可以将[[scope]]理解为所有父变量对象的层级链。 但是，[[scope]]并不是代表完整的作用域链。

### 函数激活
当函数激活时，进入到函数执行上下文中，创建相应的VO/AO。此时，会将活动对象添加到作用域链的顶端。

### 举个例子

```js
var scope = 'global scope';
function checkscope() {
    var scope1 = 'init scope';
    return scope1;
}
checkscope();
```

执行过程：
1. checkscope函数被创建，将作用域链保存到[[scope]]属性。
```js
checkscope.[[scope]] = [
    globalContext.VO
]
```

2. 执行checkscope函数，创建函数执行上下文，并将其压入执行上下文栈中。
```js
ESstack = [
    checkscopeContext,
    globalContext,
]
```

3. 